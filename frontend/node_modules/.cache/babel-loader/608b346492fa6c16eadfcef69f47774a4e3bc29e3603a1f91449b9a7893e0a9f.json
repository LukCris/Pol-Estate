{"ast":null,"code":"import{Link}from\"react-router-dom\";import\"./card.css\";import Button from\"react-bootstrap/Button\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function Card(_ref){let{item,profile,setReload}=_ref;const itemId=item._id;//ID del post immobiliare\n// Funzione per gestire il singolare/plurale in base al numero\nconst numCamere=function(){if(item.bedroom>1){return\"camere da letto\";}else return\"camera da letto\";};const numBagni=function(){if(item.bathroom>1){return\"bagni\";}else return\"bagno\";};return/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"imageContainer\",children:/*#__PURE__*/_jsx(Link,{to:\"/postDetail/\".concat(item._id),children:/*#__PURE__*/_jsx(\"img\",{src:item.images[0]})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"textContainer\",children:[/*#__PURE__*/_jsx(Link,{to:\"/postDetail/\".concat(item._id),children:/*#__PURE__*/_jsx(\"h3\",{className:\"title\",children:item.title})}),/*#__PURE__*/_jsxs(\"div\",{className:\"infoContainer\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"address\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"/pin.png\",alt:\"\"}),/*#__PURE__*/_jsxs(\"span\",{children:[item.address,\", \",item.city]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"info\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"price\",children:[\"\\u20AC \",item.price]}),/*#__PURE__*/_jsx(\"p\",{className:\"price\",children:item.type}),/*#__PURE__*/_jsx(\"p\",{className:\"price\",children:item.property})]}),/*#__PURE__*/_jsx(\"div\",{className:\"bottom\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"features\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"feature\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"/bed.png\",alt:\"\"}),/*#__PURE__*/_jsxs(\"span\",{children:[item.bedroom,\" \",numCamere()]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"feature\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"/bath.png\",alt:\"\"}),/*#__PURE__*/_jsxs(\"span\",{children:[item.bathroom,\" \",numBagni()]})]}),profile&&/*#__PURE__*/_jsx(\"div\",{className:\"icons\",children:/*#__PURE__*/_jsx(Button,{className:\"icon\",onClick:e=>{// Gestione dell'eliminazione del post\nconst token=document.cookie.split(\";\").find(row=>row.startsWith(\"token\")).split(\"=\")[1];// Ottiene il token dall'autenticazione\nconsole.log(\"Inizio prevent default\");e.preventDefault();// Richiesta HTTP per eliminare il post\nfetch(\"http://localhost:8080/api/posts/deletePost\",{method:\"post\",headers:{\"Content-Type\":\"application/json\",'Authorization':token},body:JSON.stringify({id:itemId})}).then(res=>{if(res.ok)return res.json();else throw new Error(\"Errore di comunicazione\");}).then(res=>{window.alert(res);setReload(true);}).catch(e=>console.log(e));},children:/*#__PURE__*/_jsx(\"img\",{src:\"/garbage.png\",alt:\"\"})})})]})})]})]})]});}","map":{"version":3,"names":["Link","Button","jsx","_jsx","jsxs","_jsxs","Card","_ref","item","profile","setReload","itemId","_id","numCamere","bedroom","numBagni","bathroom","className","children","to","concat","src","images","title","alt","address","city","price","type","property","onClick","e","token","document","cookie","split","find","row","startsWith","console","log","preventDefault","fetch","method","headers","body","JSON","stringify","id","then","res","ok","json","Error","window","alert","catch"],"sources":["C:/Users/lpaco/WebstormProjects/progetto finale/.progetto/frontend/src/components/card/Card.jsx"],"sourcesContent":["import { Link } from \"react-router-dom\";\r\nimport \"./card.css\";\r\nimport Button from \"react-bootstrap/Button\";\r\n\r\nexport default function Card({item, profile, setReload}) {\r\n\r\n    const itemId = item._id; //ID del post immobiliare\r\n\r\n    // Funzione per gestire il singolare/plurale in base al numero\r\n    const numCamere = function () {\r\n\r\n        if(item.bedroom > 1){\r\n            return \"camere da letto\"\r\n        } else return \"camera da letto\"\r\n    }\r\n\r\n    const numBagni = function () {\r\n        if(item.bathroom > 1){\r\n            return \"bagni\"\r\n        } else return \"bagno\"\r\n    }\r\n\r\n    return (\r\n        <div className=\"card\">\r\n            <div className=\"imageContainer\">\r\n                <Link to={`/postDetail/${item._id}`}>\r\n                    <img src={item.images[0]}/>\r\n                </Link>\r\n            </div>\r\n            <div className=\"textContainer\">\r\n                <Link to={`/postDetail/${item._id}`}>\r\n                    <h3 className=\"title\">{item.title}</h3>\r\n                </Link>\r\n                <div className=\"infoContainer\">\r\n                    <p className=\"address\">\r\n                        <img src=\"/pin.png\" alt=\"\"/>\r\n                        <span>{item.address}, {item.city}</span>\r\n                    </p>\r\n                    <div className=\"info\">\r\n                        <p className=\"price\">â‚¬ {item.price}</p>\r\n                        <p className=\"price\">{item.type}</p>\r\n                        <p className=\"price\">{item.property}</p>\r\n                    </div>\r\n\r\n                    <div className=\"bottom\">\r\n                        <div className=\"features\">\r\n                            <div className=\"feature\">\r\n                                <img src=\"/bed.png\" alt=\"\"/>\r\n                                <span>{item.bedroom} {numCamere()}</span>\r\n                            </div>\r\n                            <div className=\"feature\">\r\n                                <img src=\"/bath.png\" alt=\"\"/>\r\n                                <span>{item.bathroom} {numBagni()}</span>\r\n                            </div>\r\n                            {profile && (<div className=\"icons\">\r\n                                <Button className=\"icon\" onClick={\r\n                                    e => {\r\n                                        // Gestione dell'eliminazione del post\r\n                                        const token=document.cookie.split(\";\") \r\n                                        .find((row) => row.startsWith(\"token\")) \r\n                                        .split(\"=\")[1]; // Ottiene il token dall'autenticazione\r\n                                        console.log(\"Inizio prevent default\")\r\n                                        e.preventDefault();\r\n\r\n                                        // Richiesta HTTP per eliminare il post\r\n                                        fetch(\"http://localhost:8080/api/posts/deletePost\", {\r\n                                            method: \"post\",\r\n                                            headers: {\r\n                                                \"Content-Type\": \"application/json\",\r\n                                                'Authorization': token\r\n                                            },\r\n                                            body: JSON.stringify({\r\n                                                id: itemId\r\n                                            })\r\n                                        })\r\n                                        .then(res=> {\r\n                                            if (res.ok) return res.json(); \r\n                                            else throw new Error(\"Errore di comunicazione\")})\r\n                                        .then(res=>{\r\n                                            window.alert(res); \r\n                                            setReload(true);                               \r\n                                        })\r\n                                        .catch(e=>console.log(e));                            \r\n                                    }                                \r\n                                }>\r\n                                    <img src=\"/garbage.png\" alt=\"\"/>\r\n                                </Button>\r\n\r\n                            </div>)}\r\n                            \r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}