{"ast":null,"code":"import React,{useState}from\"react\";import Button from\"react-bootstrap/Button\";import{useNavigate}from\"react-router-dom\";import\"./register.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function Register(_ref){let{handleUser,handleUsername}=_ref;const[username,setUsername]=useState(\"\");const[email,setEmail]=useState(\"\");const[password,setPassword]=useState(\"\");// Variabili di stato per la creazione di una password sicura\nconst[passLenghtControl,setPassLenghtControl]=useState(false);const[passUpperControl,setPassUpperControl]=useState(false);const[passNumberControl,setPassNumberControl]=useState(false);// Variabile di stato per controllare che la password sia sicura\nconst[passSecured,setPassSecured]=useState(false);const handlerPassword=function(e){setPassword(e);// Lunghezza minima della password\nconst minLength=7;// Controllo che ci sia almeno una maiuscola\nconst hasUpperCase=/[A-Z]/.test(e);// Controllo che ci sia almeno un numero\nconst hasNumber=/[0-9]/.test(e);const isLengthSufficient=e.length>minLength;// Aggiorno gli stati specifici per ogni controllo\nsetPassLenghtControl(isLengthSufficient);setPassUpperControl(hasUpperCase);setPassNumberControl(hasNumber);// Aggiorno lo stato della variabile di controllo globale\nsetPassSecured(isLengthSufficient&&hasUpperCase&&hasNumber);};const navigate=useNavigate();function validateForm(){return email.length>0&&passSecured&&username.length>0;}return/*#__PURE__*/_jsx(\"div\",{className:\"register\",children:/*#__PURE__*/_jsx(\"div\",{className:\"formContainer\",children:/*#__PURE__*/_jsxs(\"form\",{id:\"reg\",onSubmit:e=>{console.log(\"inizio prev\");e.preventDefault();console.log(\"fine prev\");console.log(\"inizio fetch\");fetch(\"http://localhost:8080/api/auth/register\",{/*la fetch permette la comunicazione del payload contenente le credenziali della registrazione. \r\n                        Per inviarle al backend passo per api che prende la Route authRouter denominata auth. \r\n                        Dopo aver raggiunto la Route authRouter.js andrà a prendere la post presente in authController.*/method:'post',headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({username:username,email:email,password:password})}).then(res=>{if(res.ok)return res.json();else throw new Error('Si è verificato un errore nella comunicazione con il server');}).then(res=>{if(res!==\"Utente gia esistente\"){window.alert(\"Registrazione avvenuta con successo\");handleUser(res.token);handleUsername(res.username);navigate(\"/HomePage\");}else window.alert(\"Utente esistente, non è stato possibile effettuare la registrazione\");}).catch(e=>console.log(e));},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"inputContainer\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"usernameDiv\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Username\"}),/*#__PURE__*/_jsx(\"input\",{autoFocus:true,name:\"username\",type:\"text\",onChange:e=>setUsername(e.target.value)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"emailDiv\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{autoFocus:true,type:\"email\",name:\"email\",value:email,onChange:e=>setEmail(e.target.value)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"passwordDiv\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"pass\",value:password,onChange:e=>handlerPassword(e.target.value)}),!passSecured&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{children:\"La password deve soddisfare i seguenti criteri: \"}),/*#__PURE__*/_jsxs(\"ul\",{children:[!passLenghtControl&&/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"p\",{children:\"Deve essere lunga almeno 8 caratteri\"})}),!passNumberControl&&/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"p\",{children:\"Deve contenere almeno un numero\"})}),!passUpperControl&&/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"p\",{children:\"Deve contenere almeno una maiuscola\"})})]})]})]})]}),/*#__PURE__*/_jsx(Button,{type:\"submit\",block:true,size:\"lg\",disabled:!validateForm(),className:\"regButton\",children:\"Registrazione\"})]})})});}","map":{"version":3,"names":["React","useState","Button","useNavigate","jsx","_jsx","jsxs","_jsxs","Register","_ref","handleUser","handleUsername","username","setUsername","email","setEmail","password","setPassword","passLenghtControl","setPassLenghtControl","passUpperControl","setPassUpperControl","passNumberControl","setPassNumberControl","passSecured","setPassSecured","handlerPassword","e","minLength","hasUpperCase","test","hasNumber","isLengthSufficient","length","navigate","validateForm","className","children","id","onSubmit","console","log","preventDefault","fetch","method","headers","body","JSON","stringify","then","res","ok","json","Error","window","alert","token","catch","autoFocus","name","type","onChange","target","value","block","size","disabled"],"sources":["C:/Users/lpaco/WebstormProjects/progetto finale/.progetto/frontend/src/pages/register/Register.jsx"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport Button from \"react-bootstrap/Button\";\r\nimport {useNavigate} from \"react-router-dom\"\r\nimport \"./register.css\"\r\n\r\n\r\nexport default function Register({handleUser, handleUsername}) {\r\n\r\n    const [username,setUsername]=useState(\"\");\r\n    const [email, setEmail] = useState(\"\");\r\n    const [password, setPassword] = useState(\"\");\r\n\r\n    // Variabili di stato per la creazione di una password sicura\r\n    const [passLenghtControl, setPassLenghtControl] = useState(false);\r\n    const [passUpperControl, setPassUpperControl] = useState(false);\r\n    const [passNumberControl, setPassNumberControl] = useState(false);\r\n    // Variabile di stato per controllare che la password sia sicura\r\n    const [passSecured, setPassSecured] = useState(false);\r\n\r\n    const handlerPassword = function (e){\r\n        setPassword(e)\r\n        // Lunghezza minima della password\r\n        const minLength = 7;\r\n        // Controllo che ci sia almeno una maiuscola\r\n        const hasUpperCase = /[A-Z]/.test(e);\r\n        // Controllo che ci sia almeno un numero\r\n        const hasNumber = /[0-9]/.test(e);\r\n        \r\n        const isLengthSufficient = e.length > minLength;\r\n\r\n        // Aggiorno gli stati specifici per ogni controllo\r\n        setPassLenghtControl(isLengthSufficient);\r\n        setPassUpperControl(hasUpperCase);\r\n        setPassNumberControl(hasNumber);\r\n        \r\n        // Aggiorno lo stato della variabile di controllo globale\r\n        setPassSecured(isLengthSufficient && hasUpperCase && hasNumber);\r\n    }\r\n\r\n    const navigate=useNavigate();\r\n\r\n    function validateForm() {\r\n        return email.length > 0 && passSecured && username.length>0;\r\n    }\r\n\r\n    return (\r\n        <div className=\"register\">\r\n            <div className=\"formContainer\">\r\n                <form id=\"reg\" onSubmit={e=>{\r\n                    console.log(\"inizio prev\");\r\n                    e.preventDefault();\r\n                    console.log(\"fine prev\");\r\n                    console.log(\"inizio fetch\");\r\n                    fetch(\"http://localhost:8080/api/auth/register\", {   \r\n                        /*la fetch permette la comunicazione del payload contenente le credenziali della registrazione. \r\n                        Per inviarle al backend passo per api che prende la Route authRouter denominata auth. \r\n                        Dopo aver raggiunto la Route authRouter.js andrà a prendere la post presente in authController.*/\r\n                        \r\n                        method: 'post',\r\n                        headers: {\"Content-Type\": \"application/json\"},\r\n                        body: JSON.stringify({\r\n                            username: username,\r\n                            email: email,\r\n                            password: password\r\n                        })\r\n                    }).then(res=> {\r\n                        if (res.ok) return res.json();\r\n                        else throw new Error('Si è verificato un errore nella comunicazione con il server');\r\n                    }).then(res=> {\r\n\r\n                        if(res!==\"Utente gia esistente\")  {\r\n                            window.alert(\"Registrazione avvenuta con successo\");\r\n                            handleUser(res.token);\r\n                            handleUsername(res.username);\r\n                            navigate(\"/HomePage\");}\r\n                        else\r\n                            window.alert(\"Utente esistente, non è stato possibile effettuare la registrazione\")}).catch(e=> console.log(e))\r\n                }}>\r\n\r\n                    <div className=\"inputContainer\">\r\n\r\n                        <div className=\"usernameDiv\">\r\n                            <label>Username</label>\r\n                            <input\r\n                                autoFocus\r\n                                name=\"username\"\r\n                                type=\"text\"\r\n                                onChange={(e)=> setUsername(e.target.value)}\r\n                            />\r\n                        </div>\r\n\r\n                        <div className=\"emailDiv\">\r\n\r\n                            <label>Email</label>\r\n                            <input\r\n                                autoFocus\r\n                                type=\"email\"\r\n                                name=\"email\"\r\n                                value={email}\r\n                                onChange={(e) => setEmail(e.target.value)}\r\n                            />\r\n                            \r\n\r\n                        </div>\r\n\r\n                        <div className=\"passwordDiv\">\r\n                            <label>Password</label>\r\n                            <input\r\n                                type=\"password\"\r\n                                name=\"pass\"\r\n                                value={password}\r\n                                onChange={(e) => handlerPassword(e.target.value)}\r\n                            />\r\n                            {(!passSecured) && (\r\n                                <div>\r\n                                    <p>La password deve soddisfare i seguenti criteri: </p>\r\n                                    <ul>\r\n                                        {(!passLenghtControl) && \r\n                                            (<li><p>Deve essere lunga almeno 8 caratteri</p></li>)\r\n                                        }\r\n                                        {(!passNumberControl) && \r\n                                            (<li><p>Deve contenere almeno un numero</p></li>)\r\n                                        }\r\n                                        {(!passUpperControl) && \r\n                                            (<li><p>Deve contenere almeno una maiuscola</p></li>)\r\n                                        }\r\n                                    </ul>\r\n                                </div>\r\n                            )}\r\n\r\n                            \r\n                            \r\n\r\n                        </div>\r\n\r\n                    </div>\r\n                    <Button type=\"submit\" block size=\"lg\" disabled={!validateForm()} className=\"regButton\">Registrazione</Button>\r\n                </form>\r\n            </div>            \r\n        </div>\r\n    );\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}